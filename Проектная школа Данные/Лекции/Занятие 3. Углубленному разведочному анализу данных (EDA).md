
[[Презентация к занятию 3.pdf]]
Этот подробный конспект составлен на основе материалов занятия №3, посвященного **Углубленному разведочному анализу данных (EDA)**, включая статистический анализ, визуализацию, работу с аномалиями и текстовыми данными.

Цель занятия — перейти от базового ознакомления с данными к количественному подтверждению наблюдений и глубинному пониманию их структуры.

---

## I. Визуальный анализ данных

**Цель:** Увидеть закономерности, связи, распределения и выбросы, чтобы «почувствовать» структуру данных, переходя от таблиц к картинке.

### А. Одномерный анализ (Анализ одного признака)

|Понятие|Что показывает|Пояснение простым языком|Источники|
|:--|:--|:--|:--|
|**Гистограмма (Histogram)**|Распределение значений через частоты (количество) по интервалам (бинам).|Это как подсчет, сколько раз каждое значение (или группа значений) встречается, чтобы увидеть, где собирается большая часть данных. Позволяет быстро оценить форму распределения (например, наличие хвостов).||
|**График KDE (Kernel Density Estimation)**|Сглаженную оценку плотности распределения.|Представьте, что на гистограмму накинули мягкое одеяло. KDE — это плавная линия, которая показывает, где данные сгруппированы, не разбивая их на жесткие столбики (бины). Ось Y показывает долю этого значения, а не его каунтеры.||
|**Boxplot (Ящик с усами)**|Медиану, межквартильный размах (IQR), «усы» и выбросы.|Это быстрый способ увидеть, где находится середина данных (медиана), где сосредоточена их основная часть (ящик — 50% наблюдений), и есть ли очень странные, вылетающие значения (выбросы).||
|**Кумулятивная функция распределения (CDF)**|Долю наблюдений, которые меньше или равны определенному значению (нарастающая функция).|Показывает, какой процент данных находится ниже определенного значения. Удобен для чтения медианы и квартилей.||

### Б. Виды распределений

**Нормальное распределение** (Симметричное «колоколообразное»):

- Большинство значений сосредоточено около среднего (медианы).
- Характеризуется средним ($\mu$) и стандартным отклонением ($\sigma$).
- **Правило 68-95-99.7:** 68% наблюдений находятся в пределах $\pm 1\sigma$, 95% — в пределах $\pm 2\sigma$, и 99.7% — в пределах $\pm 3\sigma$.

**Ненормальные распределения**:

- **Длинный хвост вправо:** Типично для цен, доходов, просмотров. Большинство значений низкие, но есть редкие и очень высокие (например, доходы богатейших людей).
- **Два пика (Многомодальность):** Отражает смешение двух групп, например, если анализировать рост мужчин и женщин вместе.
- **Равномерное:** Все значения встречаются примерно одинаково.
- **Экспоненциальное:** Быстрое убывание, характерно для времени до события.

### В. Многомерный анализ (Связь между признаками)

|Понятие|Что показывает|Пояснение простым языком|Источники|
|:--|:--|:--|:--|
|**Scatter Plot (Диаграмма рассеяния)**|Форму и силу связи между двумя числовыми переменными.|Каждая точка — это одно наблюдение. По тому, как точки выстраиваются (в линию, в облако), можно увидеть, связаны ли два параметра (например, цена и пробег).||
|**Плотность точек (Тепловая матрица)**|Агрегацию точек в области (бинах).|Используется, когда данных так много, что Scatter Plot превращается в сплошной "ковер". Показывает, где точки сконцентрированы наиболее плотно.||

---

## II. Статистический анализ

**Цель:** Перейти от визуальных наблюдений к измеримым и сравнимым данным, чтобы количественно подтвердить выводы.

### А. Показатели центральной тенденции

|Метрика|Что показывает|Пояснение простым языком|Когда применять|Источники|
|:--|:--|:--|:--|:--|
|**Среднее (Mean)**|«Центр масс» данных.|Сумма всех значений, деленная на их количество. Сильно искажается, если есть выбросы (например, при расчете среднего чека).|Если нет сильных выбросов.||
|**Медиана (Median)**|Значение посередине (50% наблюдений ниже, 50% выше).|Если вы выстроите все данные в ряд по порядку, медиана — это то, что находится ровно посередине. Она устойчива к выбросам.|Устойчива к выбросам.||
|**Мода (Mode)**|Наиболее частое значение.|Самое популярное значение в наборе данных. Имеет смысл для категориальных или частотных оценок (например, рейтинг).|Категориальные или дискретные данные.||

### Б. Меры разброса (Дисперсии)

|Метрика|Что показывает|Пояснение простым языком|Источники|
|:--|:--|:--|:--|
|**Размах (Range)**|Разница между максимальным и минимальным значением ($\max - \min$).|Самая грубая оценка диапазона данных.||
|**Дисперсия (Variance)**|Среднее квадратичное отклонение от среднего.|Показывает, насколько данные разбросаны вокруг среднего. Чем выше дисперсия, тем менее однородна выборка. Очень чувствительна к выбросам.||
|**СКО (Стандартное отклонение, Std)**|Корень из дисперсии.|«В среднем отклоняется на…». Используется для построения доверительных интервалов и оценки P-value.||
|**Межквартильный размах (IQR)**|Разница между Q3 и Q1 (75-й и 25-й перцентили).|Показывает диапазон, в котором сосредоточена основная, центральная половина (50%) ваших данных. Устойчив к крайним выбросам.||

### В. Форма распределения

|Показатель|Что описывает|Интерпретация|Источники|
|:--|:--|:--|:--|
|**Skewness (Асимметрия)**|Асимметрия распределения (наличие «хвоста»).|$>0$ — хвост вправо (например, цены); $<0$ — хвост влево.||
|**Kurtosis (Эксцесс)**|«Острота» или «высота» пика распределения.|$>0$ — острее нормального.||

### Г. Корреляция

**Корреляция** — оценка силы и формы связи между признаками.

- **Пирсон:** Измеряет линейную связь. Чувствителен к выбросам.
- **Спирмен / Кендалл:** Монотонная (ранговая) связь. Работает не с самими значениями, а с их рангами (порядком), поэтому более устойчив к выбросам и ненормальным распределениям.

**Опасность интерпретации:**

- **Корреляция $\neq$ Причинность (Causation)**. Если два параметра коррелируют (например, продажи мороженого и солнечные ожоги), это не значит, что один вызывает другой. Может быть третья, скрытая переменная (например, жаркая погода/солнце).
- **Скрытые группы:** Корреляция может отличаться в разных подгруппах (стратифицировать выборку).

### Д. Доверительный интервал и Тестирование гипотез

|Понятие|Что делает|Пояснение простым языком|Источники|
|:--|:--|:--|:--|
|**Доверительный интервал (ДИ)**|Диапазон, в котором с заданной вероятностью (обычно 95%) находится истинное среднее признака.|Это «вилка» значений, внутри которой, мы уверены, лежит настоящее среднее. Если реальное значение (например, количество заказов) выходит за этот интервал, это означает серьезную ошибку или аномалию.||
|**T-тест (или любой стат. тест)**|Проверяет, есть ли **статистически значимая** разница между средними двух независимых групп.|Помогает понять, не случайна ли разница, которую мы наблюдаем (например, в конверсии между Группой А и Группой Б в А/B тесте). Если P-value (вероятность получить такое значение случайно) меньше 0.05, разница считается реальной.||

---

## III. Работа с временными рядами

**Временной ряд (Time Series)** — последовательность наблюдений, упорядоченных по времени (например, продажи по дням).

**Главное отличие:** Значение в будущем зависит от предыдущих значений (например, от того, что было вчера или год назад), а не от оторванных от времени параметров (как в обычных ML-моделях).

**Разложение ряда (Decomposition):** Временной ряд можно разбить на компоненты:

1. **Тренд (Trend):** Долгосрочная динамика (растет или падает ваш бизнес).
2. **Сезонность (Seasonality):** Повторяющиеся циклы (например, пики продаж каждую зиму или каждый понедельник).
3. **Остаток/Шум (Residual):** То, что не объясняется трендом или сезонностью.

**Стационарность временных рядов**:

- **Стационарный ряд:** Среднее и дисперсия не меняются во времени; нет тренда или сезонности. Он колеблется вокруг одного среднего значения.
- **Важность:** Большинство статистических моделей (например, ARIMA) требуют стационарности.
- **Устранение нестационарности:** Обычно используется **первая разность** (разница между текущим и предыдущим значением) или **логарифмирование**.

---

## IV. Работа с выбросами и аномалиями

**Выброс (Outlier, Аномалия)** — наблюдение, существенно отличающееся от большинства данных в выборке.

### А. Причины возникновения выбросов

Выбросы могут быть вызваны:

1. **Ошибками данных:** Опечатки, неверные единицы измерения (например, цена на сырный соус 986 000).
2. **Разной природой наблюдений:** Смешение несравнимых категорий (например, новых и старых автомобилей).
3. **Редкими, но реальными случаями:** VIP-покупатели, вирусные товары. Их нужно анализировать или учитывать.
4. **Фродом (Fraud):** Выбросы могут быть предвестниками мошенничества (например, использование промокодов).

### Б. Последствия выбросов

Выбросы сильно вредят анализу:

- **Искажение метрик:** Среднее и дисперсия «уезжают» от реальных значений.
- **Неправильные выводы:** Ложные корреляции или ошибочные результаты А/B тестов.
- **Проблемы в моделях:** Модели «учатся» на шуме, что снижает их качество.

### В. Методы обнаружения выбросов

|Метод|Что показывает|Применение|Источники|
|:--|:--|:--|:--|
|**Z-Score (Метод стандартных отклонений)**|Значения, выходящие за пределы $3\sigma$ (трех стандартных отклонений).|Подходит преимущественно для нормальных распределений.||
|**IQR (Межквартильный размах)**|Диапазон $Q1 - 1.5 \times IQR$ и $Q3 + 1.5 \times IQR$.|**Универсальный метод**, который работает даже для ненормальных распределений.||
|**Тест Граббса (Grubbs’ Test)**|Формальный статистический тест, чтобы подтвердить наличие **одного** выброса в небольшой нормально распределенной выборке.||

### Г. Методы устранения выбросов

Если выброс найден, можно:

- **Удалить:** Если это ошибки или шум, и выборка достаточно большая.
- **Ограничить (Winsorization):** Заменить крайние значения на определенные границы (например, на Q1 или Q3).
- **Логарифмировать / Нормализовать:** Применяется, если у данных «длинные хвосты» (например, логарифм цены). Делает данные более симметричными.
- **Сегментировать:** Разделить данные на группы (например, по типу двигателя или категории), чтобы выброс, который был аномалией для всей выборки, не был аномалией для своей категории.

---

## V. Работа с текстовой информацией

Текстовые данные (отзывы, описания, комментарии, поисковые запросы) являются критически важными.

### А. Базовая предобработка текста

Чтобы машина могла работать с текстом, его необходимо привести к единому виду:

1. **Приведение к нижнему регистру:** Нормализация слов.
2. **Удаление пунктуации и цифр:** Эти символы обычно не нужны для анализа тональности или частот.
3. **Удаление стоп-слов:** Исключение часто встречающихся, но малоинформативных слов, таких как «и», «это», «но».
4. **Лемматизация/Стемминг:** Приведение слов к их основе или корню.
    - _Пояснение простым языком:_ Это нужно, чтобы слова «бежать», «бежит» и «бегал» стали одним словом «бег».
5. **Токенизация:** Разбиение очищенного текста на отдельные слова (токены).

### Б. Анализ и использование текста

|Метод|Что делает|Пояснение простым языком|Применение|Источники|
|:--|:--|:--|:--|:--|
|**Частотный анализ**|Подсчет отдельных слов (униграммы) или устойчивых фраз (биграммы/триграммы).|Найти, какие слова или сочетания слов встречаются чаще всего (например, «быстрая доставка» или «трещина на стекле»).|WordCloud, выявление популярных проблем в отзывах.||
|**Оценка тональности (Sentiment Analysis)**|Определение отношения автора к объекту (позитивное, негативное, нейтральное).|Библиотека считывает слова и их контекст, чтобы присвоить тексту оценку: положительный (polarity > 0), отрицательный (polarity < 0) или нейтральный (≈ 0).|Мониторинг качества сервиса, классификация контента.||
|**Использование в ML**|Полученный **Sentiment Score** или другие признаки текста (длина, уникальные слова) используются как **фича** в модели.|Например, если пользователь оставил много негативных отзывов, его «негативность» (sentiment score) может быть использована моделью для предсказания вероятности его оттока (churn).||

---

> **Аналогия для закрепления понимания:**
> 
> Представьте, что анализ данных — это **медицинская диагностика**.
> 
> - **Визуальный анализ (Графики):** Вы смотрите на пациента — видите его цвет лица, температуру, внешние симптомы. Это **первичный осмотр**.
> - **Статистический анализ (Средние, Дисперсия):** Вы берете базовые анализы — измеряете пульс, давление, температуру. Вы переходите от «он выглядит плохо» к «давление 140/90» — это **количественное измерение**.
> - **Выбросы (Аномалии):** Это неожиданно высокая температура или нетипично низкий пульс. Это может быть как простая ошибка термометра (ошибка данных), так и серьезное заболевание (редкий, но реальный случай).
> - **Временные ряды:** Это отслеживание давления и температуры в течение нескольких дней, чтобы увидеть **тренд** (улучшается или ухудшается) и **сезонность** (например, ежедневные колебания давления).
> - **T-тест (Тестирование гипотез):** Это проверка нового лекарства: действительно ли группа А, принимавшая его, показала статистически **значимую** разницу в выздоровлении по сравнению с группой Б?.