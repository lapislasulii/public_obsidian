### Конспект лекции 3. Сетевой слой. Часть 1

Данная лекция посвящена изучению сетевого уровня (Network Layer) ИТ-инфраструктуры, принципам организации сетевого взаимодействия через абстрактные слои и анализу основного стека протоколов современности — TCP/IP.

#### 1. Роль сетевого слоя в ИТ-инфраструктуре

**Networking (сетевая инфраструктура)** представляет собой слой, который предоставляет сетевые ресурсы и услуги, обеспечивающие соединение, маршрутизацию и безопасность данных. К примерам реализации этого слоя относятся коммутаторы, роутеры, стеки протоколов и программно-определяемые сети (SDN).

Использование **многослойного стека абстракций** в сетевых коммуникациях обусловлено необходимостью решения ряда специфических проблем:

- Обеспечение взаимодействия разнообразных систем и приложений.
- Работа через различное оборудование в рамках одного сеанса связи.
- Организационное разграничение управления в крупных сетях.
- Потребность в общедоступных и совместимых стандартах, так как реализация коммуникации в рамках монолитных проприетарных систем невозможна.

#### 2. Основные понятия сетевого взаимодействия

Для понимания работы сети в лекции вводятся следующие определения:

- **Сетевой стек** — набор сетевых протоколов, работающих в определенной последовательности для передачи данных между двумя и более системами (или приложениями внутри одной системы).
- **Уровень стека** — группа протоколов, решающих общую подгруппу задач сетевого взаимодействия.
- **Протокол** — соглашение об обработке данных и интерфейсах ввода-вывода, используемое для реализации конкретного модуля коммуникации.

**Типы сетей по способу взаимодействия:**

1. **Локальная сеть** — узлы взаимодействуют напрямую через сетевое оборудование одного типа (один протокол канального уровня) без использования маршрутизации. В таких сетях ключевыми задачами являются адресация, разделение канала и обеспечение надежности доставки.
2. **Составная сеть** — объединение локальных сетей с помощью маршрутизации. Здесь добавляются задачи межсетевого взаимодействия, обеспечения качества связи (QoS) и глобальной безопасности.

#### 3. Стек протоколов TCP/IP

На текущий момент **TCP/IP** является основным сетевым стеком на рынке. Его главными свойствами являются **платформонезависимость** и **открытость**. Своё название он получил от двух ключевых протоколов: **TCP** (Transmission Control Protocol) и **IP** (Internet Protocol).

**Уровни стека TCP/IP и соответствующие им единицы данных:**

- **Прикладной уровень (Application):** на этом уровне оперируют прикладные протоколы (HTTP, FTP, DNS и др.), данные представляют собой **поток**.
- **Транспортный уровень (Transport):** протоколы **TCP** (передача с установкой соединения, единица данных — **сегмент**) и **UDP** (дейтаграммная передача, единица данных — **дейтаграмма**).
- **Сетевой уровень (Internet):** основной протокол — **IP**, единица данных — **пакет** (или дейтаграмма).
- **Уровень сетевого доступа (Network Access / Канальный):** определяет принципы взаимодействия оборудования, данные упаковываются в **кадры (фреймы)**.

#### 4. Сетевое оборудование

Функционирование сети обеспечивается различными типами устройств, каждое из которых работает на своем уровне:

- **Сетевые адаптеры:** интерфейсные средства, обеспечивающие физическое подключение компьютера к сети.
- **Коммутаторы (Switches):** основное оборудование локальных сетей. Соединяют компьютеры на основании общего канального протокола.
    - _Классификация:_ по уровню (L2 — управляемые/неуправляемые, L3 — управляемые), по назначению (доступа/рабочих групп, распределения, ядра сети, промышленные) и по конструктивному исполнению (модульные, Rack-Mount).
- **Маршрутизаторы (Routers):** объединяют сегменты сетей в составную сеть на сетевом уровне.
    - _Принцип работы:_ входящий кадр деинкапсулируется, на основе таблицы маршрутизации (заполненной вручную или через протоколы) выбирается шлюз и порт, после чего пакет инкапсулируется в новый кадр канального уровня.
    - _Важная особенность:_ маршрутизаторы **не передают широковещательный трафик**.
- **Wi-Fi устройства:** **Точка доступа** (Access Point) обеспечивает беспроводное подключение, в то время как **Wi-Fi роутер** — это комбинированное устройство, включающее в себя коммутатор, точку доступа, маршрутизатор и встроенный компьютер для доп. функций (DHCP, NAS и др.).

#### 5. Адресация и взаимодействие приложений

Для успешной передачи данных на каждом уровне стека используются свои адреса:

1. **Прикладной уровень:** символьные имена (например, `www.ifmo.ru`), разрешаемые через DNS.
2. **Транспортный уровень:** **номер порта** (TCP или UDP). Например, порт 443 для защищенного веб-трафика.
3. **Сетевой уровень:** **IP-адрес** (IPv4, например `192.168.0.103`, или IPv6).
4. **Канальный уровень:** **MAC-адрес** (Media Access Control), жестко привязанный к оборудованию.

**Процесс установления соединения (на примере TCP):**

- **Программа-сервер** занимает заранее известный порт (например, порт 80 для веб-сервера).
- **Программа-клиент** при запуске занимает свободный случайный порт (обычно выше 1024).
- Соединение инициируется клиентом и идентифицируется парой **сокетов** (комбинация IP-адреса и порта).
- Данные первого пакета включают порт и адрес отправителя и получателя; после ответа целевого компьютера соединение считается установленным.

#### Основные выводы:

- Сетевое взаимодействие снова реализовано в виде **стека**, что позволяет использовать совместимые и взаимозаменяемые компоненты.
- **TCP/IP** — доминирующий стандарт открытого типа.
- Каждое сетевое устройство и процесс в ОС имеют свои специфические адреса на разных уровнях стека.